<!doctype html><!--文档头信息——默认html文档-->
<html lang="en" xmlns:v-bind="http://www.w3.org/1999/xhtml"><!--根标签 en表英语 -->
<head>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta charset="UTF-8"><!-- 字符编码 -->
    <meta name="Generator" content="EditPlus®"><!-- 使用编辑器 不重要 可以不写 -->
    <meta name="Author" content="XX"><!-- 作者 可以不写-->
    <meta name="Keywords" content=""><!-- 关键字 -->
    <meta name="Description" content=""><!-- 描述 对网页做一个描述，介绍网页-->
    <title>卖机甲</title><!-- 标题 -->
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/meida-common.css">
    <link rel="stylesheet" href="css/media-style.css">
    <!--    <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>-->
    <!--    <script src="https://cdn.bootcss.com/jquery.form/4.2.1/jquery.form.js"></script>-->

    <script src="js/vue.js"></script>
</head>
<body>
<div id="wrap">
    <!--header start-->
    <header class="">
        <div class="content clearfix">
            <h1 class="fl">
                <a href="index.html">
                    <img src="img/logo.png" alt="">
                </a>
            </h1>
            <div class="right fr clearfix">
                <nav class="fl" id="menu">
                    <div class="d-ib ">
                        <a href="index.html">首页</a>
                    </div>
                    <div class="d-ib ">
                        <a href="about.html">关于我们</a>
                    </div>
                    <div class="d-ib">
                        <a href="career.html">事业内容架构</a>
                    </div>
                    <div class="d-ib">
                        <a href="buy.html">买机甲</a>
                    </div>
                    <div class="d-ib on">
                        <a href="sell.html">卖机甲</a>
                    </div>
                    <div class="d-ib">
                        <a href="sc.html">商城入口</a>
                    </div>
                    <div class="d-ib">
                        <a href="recruiting.html">创客达人招募</a>
                    </div>
                    <div class="d-ib">
                        <a href="service.html">服务保障</a>
                    </div>
                    <div class="d-ib">
                        <a href="help.html">咨询服务</a>
                    </div>
                </nav>
                <div class="lwg fl">
                    <a href="">中文</a>
                    丨
                    <a href="en/sell.html">EN</a>
                </div>
                <div class="phone p-a">
                    <p></p>
                    <p></p>
                    <p></p>
                </div>
            </div>
        </div>
        <div class="sNav p-a">
            <a href="">机甲设备发布</a>
            <a href="">卖机甲流程</a>
            <a href="">卖机甲保障</a>
        </div>
    </header>
    <!--header end-->
    <!--banner start-->
    <div class="banner p-r" id="bannerLevel">
        <img :src="baseUrl+banner.urlCn">
    </div>
    <!--banner end-->
    <!--sell start-->
    <div class="sell" id="message">
        <div class="content" >
            <form id="form_submit" action="#" enctype="multipart/form-data"
                  name="form_submit" method="post">
                <div class="form">


                    <h4><a class="p-r">机甲设备发布</a></h4>
                    <div class="up">
                        <div class="d-ib">选择分类</div>
                        <select name="categoryName" id="categoryName">
                            <option v-for="category in categoryList" :value="category.nameCn">{{category.nameCn}}</option>
                        </select>
                    </div>
                    <div class="up">
                        <div class="d-ib">选择品牌</div>
                        <select name="brandName" id="brandName">
                            <option :value="brand.nameCn" v-for="brand in brandList">{{brand.nameCn}}</option>
                        </select>
                    </div>

                    <div class="up">
                        <div class="d-ib">设备型号</div>
                        <div class="input d-ib p-r">
                            <input type="text" placeholder="" name="unitType" id="unitType">
                        </div>
                    </div>
                    <div class="up">
                        <div class="d-ib">停放地点</div>
                        <select name="province" id="province" @change="changeProvince($event)">
                            <option :value="province.name" v-for="province in provinceList">{{province.name}}</option>
                        </select>
                        <select name="city" id="city" @change="changeCity($event)">
                            <option :value="city.name" v-for="city in cityList.city">{{city.name}}</option>
                        </select>
                        <select name="district" id="district">
                            <option :value="district" v-for="district in districtList.area">{{district}}</option>
                        </select>
                    </div>

                    <div class="up">
                        <div class="d-ib">期望价格</div>
                        <div class="input d-ib p-r">
                            <input type="number" placeholder="请输入期望价格" name="expectedPrice" id="expectedPrice">
                        </div>
                    </div>
                    <div class="up">
                        <div class="d-ib">出厂年限</div>
                        <div class="input d-ib p-r">
                            <input type="date" placeholder="请输入出厂年限" name="deliveryTime" id="deliveryTime">
                        </div>
                    </div>
                    <div class="up">
                        <div class="d-ib">车辆照片</div>
                        <input type="file" multiple name="file" id="imgUrl" onchange="imgChange(this)">
                        <div class="upImg" id="upImg">
<!--                            <img src="img/e.png" alt="" id="showImg">-->
                            <p>请上传jpg、png格式照片，最少5张最多20张</p>
                        </div>
                    </div>
                    <div class="up">
                        <div class="d-ib mt">使用经历</div>
                        <textarea name="usingExperience" id="usingExperience" cols="" rows=""
                                  placeholder="请写一下车况感受。"></textarea>
                    </div>
                    <div class="up">
                        <div class="d-ib"><span>*</span>联系人</div>
                        <div class="input d-ib p-r">
                            <input type="text" placeholder="" name="linkman" id="linkman">
                            <div class="p-a">
                                <span :class="isChoose==0 ? 'on' : 'off' " @click="chooseSex(0)">先生</span>
                                丨
                                <span :class="isChoose==1 ? 'on' : 'off' " @click="chooseSex(1)">女士</span>
                            </div>
                            <input type="text" placeholder="" name="sex" :value="isChoose" class="hide">
                        </div>
                    </div>
                    <div class="up">
                        <div class="d-ib"><span>*</span>手机号</div>
                        <div class="input d-ib">
                            <input type="number" placeholder="" name="phone" id="phone">
                        </div>
                    </div>
                    <div class="up">
                        <div class="d-ib"><span>*</span>邮箱号</div>
                        <div class="input d-ib">
                            <input type="text" placeholder="" name="mail" id="mail">
                        </div>
                    </div>
                    <div class="up">
                        <div class="d-ib"><span>*</span>Wechat</div>
                        <div class="input d-ib">
                            <input type="text" placeholder="" name="wechat" id="wechat">
                        </div>
                    </div>
                    <div class="up">
                        <div class="d-ib"></div>
                        <div class="submit-sell" onclick="submit()">立即发布</div>
                        <input type="reset" class="hide" />
                    </div>
                </div>
            </form>
            <div class="sellProgress clearfix">
                <h4 class="s-title">卖机甲流程</h4>
                <div class="fl">
                    <img src="img/s1.png" alt="">
                    <p>提交信息</p>
                </div>
                <div class="fl">
                    <img src="img/s2.png" alt="">
                    <p>平台估价</p>
                </div>
                <div class="fl">
                    <img src="img/s3.png" alt="">
                    <p>与您联系</p>
                </div>
                <div class="fl">
                    <img src="img/s4.png" alt="">
                    <p>撮合成交</p>
                </div>
            </div>
            <div class="potential">
                <h4 class="s-title">卖机甲保障</h4>
                <img src="img/potential.png" alt="">
            </div>
        </div>
    </div>
    <!--sell end-->
    <!--footer start-->
    <footer>
        <div class="content">
                <div class="d-ib">
                    <h3>
                        <a href="career.html">服务内容架构</a>
                    </h3>
                    <div>
                        <a href="career.html">机甲云智能实验室</a>
                        <a href="career.html">机甲链SIOT服务平台</a>
                        <a href="career.html">新车新部品新零售</a>
                        <a href="career.html">金融生态服务</a>
                        <a href="career.html">机甲商事</a>
                    </div>
                </div>
                <div class="d-ib">
                    <h3>
                        <a href="buy.html">买机甲</a>
                    </h3>
                    <div>
                        <a href="buy.html">车源需求发布</a>
                        <a href="buy.html">买机甲流程</a>
                        <a href="buy.html">买机甲保障</a>
                    </div>
                </div>
                <div class="d-ib">
                    <a href="">
                        <img src="img/logo2.png" alt="">
                    </a>
                </div>
                <div class="d-ib">
                    <h3>
                        <a href="sell.html">卖机甲</a>
                    </h3>
                    <div>
                        <a href="sell.html">机甲车源发布</a>
                        <a href="sell.html">卖机甲流程</a>
                        <a href="sell.html">机甲出售保障</a>
                    </div>
                </div>
                <div class="d-ib">
                    <h3>
                        <a href="recruiting.html">创客达人招募</a>
                    </h3>
                    <div>
                        <a href="recruiting.html">创客赚钱方式</a>
                        <a href="recruiting.html">创客平台介绍</a>
                        <a href="recruiting.html">创客达人优势</a>
                        <a href="recruiting.html">如何成为创客达人</a>
                    </div>
                </div>
            </div>
    </footer>
    <!--footer end-->
</div>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="js/hdNav.js"></script>
<script type="text/javascript">
    $(".sell .content .form .up ").each(function (index, item) {
        $(item).find(".input div span").click(function () {
            $(this).addClass("on").siblings().removeClass("on")
        })
    });




    //选择图片
    function imgChange(t) {
        var files = t.files;
        for (var i = 0; i < files.length; i++) {
            var f = files[i];
            var url = window.URL.createObjectURL(f);

            $('#upImg').append("<img src='" + url + "' style='width: 200px;margin: 10px 20px;' >")
        }
    };

    function submit() {
        // var categoryName = $("#categoryName option:selected").text();
        var categoryName2 = $("#categoryName").val();
        if (categoryName == '') {
            alert('分类不能为空');
            return;
        }
        var brandName = $("#brandName").val();
        if (brandName == '') {
            alert('品牌不能为空');
            return;
        }
        var unitType = $("#unitType").val();
        if (unitType == '') {
            alert('设备型号不能为空');
            return;
        }
        var province = $("#province").val();
        var city = $("#city").val();
        var district = $("#district").val();
        var expectedPrice = $("#expectedPrice").val();
        if (expectedPrice == '') {
            alert('期望价格不能为空');
            return;
        }
        var deliveryTime = $("#deliveryTime").val();
        if (deliveryTime == '') {
            alert('出厂年限不能为空');
            return;
        }
        var imgUrl = $("#imgUrl").val();
        if (imgUrl == '') {
            alert('请上传车辆图片');
            return;
        }
        var linkman = $("#linkman").val();
        if (linkman == '') {
            alert('联系人不能为空');
            return;
        }
        var phone = $("#phone").val();
        if (phone == '') {
            alert('手机号不能为空');
            return;
        }
        var mail = $("#mail").val();
        if (mail == '') {
            alert('邮箱号不能为空');
            return;
        }
        var wechat = $("#wechat").val();
        if (wechat == '') {
            alert('微信号不能为空');
            return;
        }
        var usingExperience = $("#usingExperience").val();
        if (usingExperience == '') {
            alert('使用经历不能为空');
            return;
        }

        var formData = new FormData($('#form_submit')[0]);
        $.ajax({
            type: 'post',
            url: "issue/submit",
            data: formData,
            cache: false,
            processData: false,
            contentType: false,
            success: function (res) {
                if (res.code == 0) {
                    alert("发布成功，等待后台审核");
                    $("input[type=reset]").trigger("click");
                } else {
                    alert(res.msg);
                }
            }, error: function () {
                alert("发布失败");
            }
        });

    }


    var message = new Vue({
        el: '#message',
        data: {
            categoryList: [],
            brandList: [],
            provinceList: [],
            cityList: [],
            districtList: [],
            isChoose: 0,
            // banner: {},
            baseUrl: urlPre
        },
        created: function () {
            var that = this;
            //获取分类
            $.get("category/getAll",
                {},
                function (res) {
                    if (res.code == 0) {
                        that.categoryList = res.data;
                    } else {
                        //错误提示
                        alert(res.msg);
                    }
                });
            //获取品牌
            $.get("brand/getAll",
                {},
                function (res) {
                    if (res.code == 0) {
                        that.brandList = res.data;
                    } else {
                        //错误提示
                        alert(res.msg);
                    }
                });
            //获取多语言信息
            $.get("config/address.json",
                {},
                function (res) {
                    that.provinceList = res;
                    that.cityList = res[0];
                    that.districtList = that.cityList.city[0]
                });
            // //获取banner图
            // $.get("banner/getByType",
            //     {
            //         type: 5
            //     },
            //     function (res) {
            //         if (res.code == 0) {
            //             that.banner = res.data[0];
            //         } else {
            //             //错误提示
            //             alert(res.msg);
            //         }
            //     });


        },
        methods: {
            changeProvince: function (e) {
                var index = e.currentTarget.selectedIndex;
                this.cityList = this.provinceList[index];
                this.districtList = this.cityList.city[0];

            },
            changeCity: function (e) {
                var index = e.currentTarget.selectedIndex;
                this.districtList = this.cityList.city[index];

            },
            chooseSex: function (index) {
                this.isChoose = index
            }
        }
    })

    var bannerLevel = new Vue({
        el: '#bannerLevel',
        data: {
            data: {},
            banner: {},
            baseUrl: urlPre
        },
        created: function () {
            var that = this;
            var te = localStorage.getItem("dem_language")
            that.language = (localStorage.getItem("dem_language") == null || localStorage.getItem("dem_language") == 0) ? 0 : 1;

            //获取banner图
            $.get("banner/getByType",
                {
                    type: 5
                },
                function (res) {
                    if (res.code == 0) {
                        that.banner = res.data[0];
                    } else {
                        //错误提示
                        alert(res.msg);
                    }
                });

        },
        methods: {


        }
    })
</script>
</body>
</html>